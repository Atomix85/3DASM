     1                                  ; external functions from X11 library
     2                                  extern XOpenDisplay
     3                                  extern XDisplayName
     4                                  extern XCloseDisplay
     5                                  extern XCreateSimpleWindow
     6                                  extern XMapWindow
     7                                  extern XRootWindow
     8                                  extern XSelectInput
     9                                  extern XFlush
    10                                  extern XCreateGC
    11                                  extern XSetForeground
    12                                  extern XDrawLine
    13                                  extern XClearWindow
    14                                  extern XNextEvent
    15                                  
    16                                  ; external functions from stdio library (ld-linux-x86-64.so.2)    
    17                                  extern printf
    18                                  extern exit
    19                                  
    20                                  extern projectVect
    21                                  extern canShow
    22                                  extern rotate
    23                                  
    24                                  %define	StructureNotifyMask	131072
    25                                  %define KeyPressMask		1
    26                                  %define ButtonPressMask		4
    27                                  %define MapNotify		19
    28                                  %define KeyPress		2
    29                                  %define ButtonPress		4
    30                                  %define Expose			12
    31                                  %define ConfigureNotify		22
    32                                  %define CreateNotify 16
    33                                  %define QWORD	8
    34                                  %define DWORD	4
    35                                  %define WORD	2
    36                                  %define BYTE	1
    37                                  
    38                                  global main
    39                                  
    40                                  section .bss
    41 00000000 <res 00000008>          display_name:	resq	1
    42 00000008 <res 00000004>          screen:		resd	1
    43 0000000C <res 00000004>          depth:         	resd	1
    44 00000010 <res 00000004>          connection:    	resd	1
    45 00000014 <res 00000004>          width:         	resd	1
    46 00000018 <res 00000004>          height:        	resd	1
    47 0000001C <res 00000008>          window:		resq	1
    48 00000024 <res 00000008>          gc:		resq	1
    49                                  
    50                                  section .data
    51                                  
    52 00000000 0000000000000000-       event:		times	24 dq 0
    52 00000000 <rept>             
    53                                  
    54                                  ;original 3d coords
    55 000000C0 F6F6F6                  opt1:    db  -10,-10,-10
    56 000000C3 0AF6F6                  opt2:    db  10, -10,-10
    57 000000C6 0A0AF6                  opt3:    db  10, 10,-10
    58 000000C9 F60AF6                  opt4:    db  -10,10,-10
    59 000000CC 0AF60A                  opt5:    db  10,-10,10
    60 000000CF F6F60A                  opt6:    db  -10,-10,10
    61 000000D2 F60A0A                  opt7:    db  -10,10,10
    62 000000D5 0A0A0A                  opt8:    db  10,10,10
    63                                  
    64                                  ;modelviewed 3d coords
    65 000000D8 F6F6F6                  pt1:    db  -10,-10,-10
    66 000000DB 0AF6F6                  pt2:    db  10, -10,-10
    67 000000DE 0A0AF6                  pt3:    db  10, 10,-10
    68 000000E1 F60AF6                  pt4:    db  -10,10,-10
    69 000000E4 0AF60A                  pt5:    db  10,-10,10
    70 000000E7 F6F60A                  pt6:    db  -10,-10,10
    71 000000EA F60A0A                  pt7:    db  -10,10,10
    72 000000ED 0A0A0A                  pt8:    db  10,10,10
    73                                  
    74                                  ;2d coords projection
    75 000000F0 0000000000000000        pjpt1:  dd  0,0
    76 000000F8 0000000000000000        pjpt2:  dd  0,0
    77 00000100 0000000000000000        pjpt3:  dd  0,0
    78 00000108 0000000000000000        pjpt4:  dd  0,0
    79 00000110 0000000000000000        pjpt5:  dd  0,0
    80 00000118 0000000000000000        pjpt6:  dd  0,0
    81 00000120 0000000000000000        pjpt7:  dd  0,0
    82 00000128 0000000000000000        pjpt8:  dd  0,0
    83                                  
    84                                  ;rotation
    85 00000130 00                      rotx:   db  0
    86 00000131 00                      roty:   db  0
    87 00000132 00                      rotz:   db  0
    88                                  
    89                                  ; faces map
    90 00000133 00010203                face1:  db  0,1,2,3
    91 00000137 01040702                face2:  db  1,4,7,2
    92 0000013B 04050607                face3:  db  4,5,6,7
    93 0000013F 05000306                face4:  db  5,0,3,6
    94 00000143 05040100                face5:  db  5,4,1,0
    95 00000147 03020706                face6:  db  3,2,7,6
    96                                  
    97                                  ; debug message
    98 0000014B 566572746578202568-     vertex: db "Vertex %hhd -> %hhd,%hhd",10,0 
    98 00000154 6864202D3E20256868-
    98 0000015D 642C256868640A00   
    99 00000165 466163652025686864-     faceMsg: db "Face %hhd",10,0
    99 0000016E 0A00               
   100                                  
   101                                  ;coords buffer
   102 00000170 00000000                x1:     dd  0
   103 00000174 00000000                x2:     dd  0
   104 00000178 00000000                y1:     dd  0
   105 0000017C 00000000                y2:     dd  0
   106                                  
   107                                  section .text
   108                                  
   109                                  ;##################################################
   110                                  ;########### PROGRAMME PRINCIPAL ##################
   111                                  ;##################################################
   112                                  
   113                                  main:
   114 00000000 4831FF                  xor     rdi,rdi
   115 00000003 E8(00000000)            call    XOpenDisplay	; Création de display
   116 00000008 48890425[00000000]      mov     qword[display_name],rax	; rax=nom du display
   117                                  
   118                                  ; display_name structure
   119                                  ; screen = Default
   120                                  ;Screen(display_name);
   121 00000010 488B0425[00000000]      mov     rax,qword[display_name]
   122 00000018 8B80E0000000            mov     eax,dword[rax+0xe0]
   123 0000001E 890425[08000000]        mov     dword[screen],eax
   124                                  
   125 00000025 488B3C25[00000000]      mov rdi,qword[display_name]
   126 0000002D 8B3425[08000000]        mov esi,dword[screen]
   127 00000034 E8(00000000)            call XRootWindow
   128 00000039 4889C3                  mov rbx,rax
   129                                  
   130 0000003C 488B3C25[00000000]      mov rdi,qword[display_name]
   131 00000044 4889DE                  mov rsi,rbx
   132 00000047 BA0A000000              mov rdx,10
   133 0000004C B90A000000              mov rcx,10
   134 00000051 41B890010000            mov r8,400	; largeur
   135 00000057 41B990010000            mov r9,400	; hauteur
   136 0000005D 6A00                    push 0x000000	; background  0xRRGGBB
   137 0000005F 6800FF0000              push 0x00FF00
   138 00000064 6A01                    push 1
   139 00000066 E8(00000000)            call XCreateSimpleWindow
   140 0000006B 48890425[1C000000]      mov qword[window],rax
   141                                  
   142 00000073 488B3C25[00000000]      mov rdi,qword[display_name]
   143 0000007B 488B3425[1C000000]      mov rsi,qword[window]
   144 00000083 BA05000200              mov rdx,131077 ;131072
   145 00000088 E8(00000000)            call XSelectInput
   146                                  
   147 0000008D 488B3C25[00000000]      mov rdi,qword[display_name]
   148 00000095 488B3425[1C000000]      mov rsi,qword[window]
   149 0000009D E8(00000000)            call XMapWindow
   150                                  
   151 000000A2 488B3425[1C000000]      mov rsi,qword[window]
   152 000000AA BA00000000              mov rdx,0
   153 000000AF B900000000              mov rcx,0
   154 000000B4 E8(00000000)            call XCreateGC
   155 000000B9 48890425[24000000]      mov qword[gc],rax
   156                                  
   157 000000C1 488B3C25[00000000]      mov rdi,qword[display_name]
   158 000000C9 488B3425[24000000]      mov rsi,qword[gc]
   159 000000D1 BAFFFFFF00              mov rdx,0xFFFFFF	; Couleur du crayon
   160 000000D6 E8(00000000)            call XSetForeground
   161                                  
   162                                  boucle: ; boucle de gestion des évènements
   163 000000DB 488B3C25[00000000]      mov rdi,qword[display_name]
   164 000000E3 48BE-                   mov rsi,event
   164 000000E5 [0000000000000000] 
   165 000000ED E8(00000000)            call XNextEvent
   166                                  
   167 000000F2 833C25[00000000]16      cmp dword[event],ConfigureNotify	; à l'apparition de la fenêtre
   168 000000FA 7435                    je dessin							; on saute au label 'dessin'
   169                                  
   170 000000FC 833C25[00000000]02      cmp dword[event],KeyPress			; Si on appuie sur une touche
   171 00000104 7402                    je rotation_event						; on saute au label 'closeDisplay' qui ferme la fenêtre
   172 00000106 EBD3                    jmp boucle
   173                                  
   174                                  ;#########################################
   175                                  ;#		DEBUT DE LA ZONE DE DESSIN		 #
   176                                  ;#########################################
   177                                  rotation_event:
   178 00000108 488B3C25[00000000]          mov rdi,qword[display_name]
   179 00000110 488B3425[1C000000]          mov rsi,qword[window] 
   180 00000118 E8(00000000)                call XClearWindow
   181                                  
   182 0000011D B00A                        mov al, 10
   183 0000011F 000425[30010000]            add [rotx],al
   184 00000126 B005                        mov al, 5
   185 00000128 000425[31010000]            add [roty],al
   186 0000012F EB00                        jmp dessin
   187                                  
   188                                  dessin:
   189                                  
   190                                  
   191                                  
   192 00000131 B900000000              mov rcx,0 ; compteur à zero
   193                                  
   194                                  forpts: ; boucle for
   195                                  
   196 00000136 51                       push rcx
   197                                  
   198 00000137 480FBE3C25-              movsx rdi,byte[rotx]
   198 0000013C [30010000]         
   199 00000140 480FBE3425-              movsx rsi,byte[roty]
   199 00000145 [31010000]         
   200 00000149 480FBE1425-              movsx rdx,byte[rotz]
   200 0000014E [32010000]         
   201 00000152 51                       push rcx
   202                                   
   203 00000153 48BB-                    mov rbx,opt1 
   203 00000155 [C000000000000000] 
   204 0000015D 4831C0                   xor rax,rax
   205 00000160 B003                     mov al,3
   206 00000162 F6E1                     mul cl
   207 00000164 4801C3                   add rbx,rax
   208 00000167 4989D8                   mov r8, rbx
   209                                   
   210 0000016A 48BB-                    mov rbx,pt1 
   210 0000016C [D800000000000000] 
   211 00000174 4831C0                   xor rax,rax
   212 00000177 B003                     mov al,3
   213 00000179 F6E1                     mul cl
   214 0000017B 4801C3                   add rbx,rax
   215 0000017E 4889D9                   mov rcx, rbx
   216                                  
   217 00000181 E8(00000000)             call rotate
   218                                   
   219 00000186 59                       pop rcx
   220                                   
   221                                   ;push rcx
   222                                   ;mov rdi, vertex
   223                                   ;mov rsi, rcx
   224                                   ;mov rdx, [rbx+1]
   225                                   ;mov rcx, [rbx+2]
   226                                   ;mov rax,0
   227                                   ;call printf
   228                                   ;pop rcx
   229                                  
   230                                   ;passation du paramètre des points 3D
   231 00000187 48BB-                    mov rbx,pt1 
   231 00000189 [D800000000000000] 
   232 00000191 4831C0                   xor rax,rax
   233 00000194 B003                     mov al,3
   234 00000196 F6E1                     mul cl
   235 00000198 4801C3                   add rbx,rax
   236 0000019B 4889DF                   mov rdi, rbx
   237                                   
   238                                   ;passation du paramètre des points 2D
   239 0000019E 48BB-                    mov rbx,pjpt1
   239 000001A0 [F000000000000000] 
   240 000001A8 4831C0                   xor rax,rax
   241 000001AB B008                     mov al,8
   242 000001AD F6E1                     mul cl
   243 000001AF 4801C3                   add rbx,rax
   244 000001B2 4889DE                   mov rsi, rbx
   245                                   
   246                                   
   247                                   ;Appel de la fonction:
   248                                   ; projectVect(vec3 rdi,vec2 rsi)
   249 000001B5 E8(00000000)             call projectVect
   250                                   
   251 000001BA 59                       pop rcx
   252 000001BB FEC1                     inc cl
   253 000001BD 80F908                   cmp cl,8 ; 8 iérations = nb sommets
   254 000001C0 0F8270FFFFFF             jb forpts
   255                                   
   256 000001C6 B100                    mov cl,0 ; compteur à zero
   257                                  forfaces:
   258 000001C8 48BB-                    mov rbx,face1
   258 000001CA [3301000000000000] 
   259 000001D2 B804000000               mov rax,4
   260 000001D7 F6E1                     mul cl
   261 000001D9 4801C3                   add rbx,rax ; rbx = adresse face itérée
   262                                   
   263 000001DC 51                       push rcx
   264                                   
   265                                   ; vecteur position 1  (commun)
   266 000001DD 48B9-                    mov rcx, pjpt1
   266 000001DF [F000000000000000] 
   267 000001E7 B408                     mov ah,8
   268 000001E9 8A03                     mov al, [rbx]
   269 000001EB F6E4                     mul ah
   270 000001ED 4801C1                   add rcx, rax
   271 000001F0 4889CF                   mov rdi,rcx  
   272                                  
   273                                   ; vecteur position 2
   274 000001F3 48B9-                    mov rcx, pjpt1
   274 000001F5 [F000000000000000] 
   275 000001FD B408                     mov ah,8
   276 000001FF 8A4301                   mov al, [rbx+1]
   277 00000202 F6E4                     mul ah
   278 00000204 4801C1                   add rcx, rax
   279 00000207 4889CE                   mov rsi,rcx 
   280                                   
   281                                   ; vecteur position 3
   282 0000020A 48B9-                    mov rcx, pjpt1
   282 0000020C [F000000000000000] 
   283 00000214 B408                     mov ah,8
   284 00000216 8A4303                   mov al, [rbx+3]
   285 00000219 F6E4                     mul ah
   286 0000021B 4801C1                   add rcx, rax
   287 0000021E 4889CA                   mov rdx,rcx 
   288                                   
   289                                   ;Appel de la fonction de face
   290                                   ;canShow(vec2 rdi, vec2 rsi, vec rdx) 
   291 00000221 E8(00000000)             call canShow
   292                                   
   293 00000226 59                       pop rcx
   294                                   
   295                                   ; si la fonction retourne 1,
   296                                   ; on affiche la face
   297                                   ; sinon on continue la boucle
   298 00000227 4883F801                 cmp rax,1
   299 0000022B 0F857F020000             jne endforfaces
   300                                      
   301                                   ;greyfaces:
   302                                   ;   mov rdi,qword[display_name]
   303                                   ;   mov rsi,qword[gc]
   304                                   ;   mov rdx,0x333333	; Couleur du crayon
   305                                   ;   call XSetForeground
   306                                   ;   jmp after_face_color
   307                                   ;whitefaces:
   308                                   ;   mov rdi,qword[display_name]
   309                                   ;   mov rsi,qword[gc]
   310                                   ;   mov rdx,0xFFFFFF	; Couleur du crayon
   311                                   ;   call XSetForeground
   312                                   ;   jmp after_face_color
   313                                   ;after_face_color:
   314                                   
   315 00000231 51                       push rcx ; empilement de rcx
   316                                  
   317                                    ; debug affiche la face affichées
   318 00000232 48BF-                     mov rdi, faceMsg
   318 00000234 [6501000000000000] 
   319 0000023C 4889CE                    mov rsi, rcx
   320 0000023F B800000000                mov rax,0
   321 00000244 E8(00000000)              call printf
   322                                  
   323                                    ; recuperation des coords 2D 
   324                                    ; à partir des  sommets 1
   325                                    ; de la face
   326 00000249 B800000000                mov rax,0
   327 0000024E 48B9-                     mov rcx,pjpt1
   327 00000250 [F000000000000000] 
   328 00000258 B008                      mov al, 8
   329 0000025A 8A23                      mov ah, [rbx]
   330 0000025C F6E4                      mul ah
   331 0000025E 4801C1                    add rcx, rax
   332 00000261 4889C8                    mov rax, rcx
   333 00000264 8B08                      mov ecx, [rax]
   334 00000266 890C25[70010000]          mov [x1],ecx
   335 0000026D 8B4804                    mov ecx, [rax+4]
   336 00000270 890C25[78010000]          mov [y1],ecx
   337                                   
   338                                    ; recuperation des coords 2D 
   339                                    ; à partir des  sommets 2
   340                                    ; de la face
   341 00000277 B800000000                mov rax,0
   342 0000027C 48B9-                     mov rcx,pjpt1
   342 0000027E [F000000000000000] 
   343 00000286 B008                      mov al, 8
   344 00000288 8A6301                    mov ah, [rbx+1]
   345 0000028B F6E4                      mul ah
   346 0000028D 4801C1                    add rcx, rax
   347 00000290 4889C8                    mov rax, rcx
   348 00000293 8B08                      mov ecx, [rax]
   349 00000295 890C25[74010000]          mov [x2],ecx
   350 0000029C 8B4804                    mov ecx, [rax+4]
   351 0000029F 890C25[7C010000]          mov [y2],ecx
   352                                   
   353                                   ; Dessine la ligne entre 1 et 2
   354 000002A6 488B3C25[00000000]        mov rdi,qword[display_name]
   355 000002AE 488B3425[1C000000]        mov rsi,qword[window]
   356 000002B6 488B1425[24000000]        mov rdx,qword[gc]
   357 000002BE 8B0C25[70010000]          mov ecx,dword[x1]	; coordonnée source en x
   358 000002C5 448B0425[78010000]        mov r8d,dword[y1]	; coordonnée source en y
   359 000002CD 448B0C25[74010000]        mov r9d,dword[x2]	; coordonnée destination en x
   360 000002D5 FF3425[7C010000]          push qword[y2]		; coordonnée destination en y
   361 000002DC E8(00000000)              call XDrawLine
   362 000002E1 59                        pop rcx
   363                                   
   364                                   ; recuperation des coords 2D 
   365                                    ; à partir des  sommets 2
   366                                    ; de la face
   367 000002E2 B800000000                mov rax,0
   368 000002E7 48B9-                     mov rcx,pjpt1
   368 000002E9 [F000000000000000] 
   369 000002F1 B008                      mov al, 8
   370 000002F3 8A6301                    mov ah, [rbx+1]
   371 000002F6 F6E4                      mul ah
   372 000002F8 4801C1                    add rcx, rax
   373 000002FB 4889C8                    mov rax, rcx
   374 000002FE 8B08                      mov ecx, [rax]
   375 00000300 890C25[70010000]          mov [x1],ecx
   376 00000307 8B4804                    mov ecx, [rax+4]
   377 0000030A 890C25[78010000]          mov [y1],ecx
   378                                   
   379                                   ; recuperation des coords 2D 
   380                                    ; à partir des  sommets 3
   381                                    ; de la face
   382 00000311 B800000000                mov rax,0
   383 00000316 48B9-                     mov rcx,pjpt1
   383 00000318 [F000000000000000] 
   384 00000320 B008                      mov al, 8
   385 00000322 8A6302                    mov ah, [rbx+2]
   386 00000325 F6E4                      mul ah
   387 00000327 4801C1                    add rcx, rax
   388 0000032A 4889C8                    mov rax, rcx
   389 0000032D 8B08                      mov ecx, [rax]
   390 0000032F 890C25[74010000]          mov [x2],ecx
   391 00000336 8B4804                    mov ecx, [rax+4]
   392 00000339 890C25[7C010000]          mov [y2],ecx
   393                                   
   394                                   ; Dessine la ligne entre 2 et 3
   395 00000340 488B3C25[00000000]        mov rdi,qword[display_name]
   396 00000348 488B3425[1C000000]        mov rsi,qword[window]
   397 00000350 488B1425[24000000]        mov rdx,qword[gc]
   398 00000358 8B0C25[70010000]          mov ecx,dword[x1]	; coordonnée source en x
   399 0000035F 448B0425[78010000]        mov r8d,dword[y1]	; coordonnée source en y
   400 00000367 448B0C25[74010000]        mov r9d,dword[x2]	; coordonnée destination en x
   401 0000036F FF3425[7C010000]          push qword[y2]		; coordonnée destination en y
   402 00000376 E8(00000000)              call XDrawLine
   403 0000037B 59                        pop rcx
   404                                    
   405                                    ; recuperation des coords 2D 
   406                                    ; à partir des  sommets 3
   407                                    ; de la face
   408 0000037C B800000000                mov rax,0
   409 00000381 48B9-                     mov rcx,pjpt1
   409 00000383 [F000000000000000] 
   410 0000038B B008                      mov al, 8
   411 0000038D 8A6302                    mov ah, [rbx+2]
   412 00000390 F6E4                      mul ah
   413 00000392 4801C1                    add rcx, rax
   414 00000395 4889C8                    mov rax, rcx
   415 00000398 8B08                      mov ecx, [rax]
   416 0000039A 890C25[70010000]          mov [x1],ecx
   417 000003A1 8B4804                    mov ecx, [rax+4]
   418 000003A4 890C25[78010000]          mov [y1],ecx
   419                                   
   420                                   ; recuperation des coords 2D 
   421                                    ; à partir des  sommets 4
   422                                    ; de la face
   423 000003AB B800000000                mov rax,0
   424 000003B0 48B9-                     mov rcx,pjpt1
   424 000003B2 [F000000000000000] 
   425 000003BA B008                      mov al, 8
   426 000003BC 8A6303                    mov ah, [rbx+3]
   427 000003BF F6E4                      mul ah
   428 000003C1 4801C1                    add rcx, rax
   429 000003C4 4889C8                    mov rax, rcx
   430 000003C7 8B08                      mov ecx, [rax]
   431 000003C9 890C25[74010000]          mov [x2],ecx
   432 000003D0 8B4804                    mov ecx, [rax+4]
   433 000003D3 890C25[7C010000]          mov [y2],ecx
   434                                   
   435                                   ; Dessine la ligne entre 3 et 4
   436 000003DA 488B3C25[00000000]        mov rdi,qword[display_name]
   437 000003E2 488B3425[1C000000]        mov rsi,qword[window]
   438 000003EA 488B1425[24000000]        mov rdx,qword[gc]
   439 000003F2 8B0C25[70010000]          mov ecx,dword[x1]	; coordonnée source en x
   440 000003F9 448B0425[78010000]        mov r8d,dword[y1]	; coordonnée source en y
   441 00000401 448B0C25[74010000]        mov r9d,dword[x2]	; coordonnée destination en x
   442 00000409 FF3425[7C010000]          push qword[y2]		; coordonnée destination en y
   443 00000410 E8(00000000)              call XDrawLine
   444 00000415 59                        pop rcx
   445                                    
   446                                    ; recuperation des coords 2D 
   447                                    ; à partir des  sommets 4
   448                                    ; de la face
   449 00000416 B800000000                mov rax,0
   450 0000041B 48B9-                     mov rcx,pjpt1
   450 0000041D [F000000000000000] 
   451 00000425 B008                      mov al, 8
   452 00000427 8A6303                    mov ah, [rbx+3]
   453 0000042A F6E4                      mul ah
   454 0000042C 4801C1                    add rcx, rax
   455 0000042F 4889C8                    mov rax, rcx
   456 00000432 8B08                      mov ecx, [rax]
   457 00000434 890C25[70010000]          mov [x1],ecx
   458 0000043B 8B4804                    mov ecx, [rax+4]
   459 0000043E 890C25[78010000]          mov [y1],ecx
   460                                   
   461                                   ; recuperation des coords 2D 
   462                                    ; à partir des  sommets 1
   463                                    ; de la face
   464 00000445 B800000000                mov rax,0
   465 0000044A 48B9-                     mov rcx,pjpt1
   465 0000044C [F000000000000000] 
   466 00000454 B008                      mov al, 8
   467 00000456 8A23                      mov ah, [rbx]
   468 00000458 F6E4                      mul ah
   469 0000045A 4801C1                    add rcx, rax
   470 0000045D 4889C8                    mov rax, rcx
   471 00000460 8B08                      mov ecx, [rax]
   472 00000462 890C25[74010000]          mov [x2],ecx
   473 00000469 8B4804                    mov ecx, [rax+4]
   474 0000046C 890C25[7C010000]          mov [y2],ecx
   475                                   
   476                                    ; Dessine la ligne entre 4 et 1
   477 00000473 488B3C25[00000000]        mov rdi,qword[display_name]
   478 0000047B 488B3425[1C000000]        mov rsi,qword[window]
   479 00000483 488B1425[24000000]        mov rdx,qword[gc]
   480 0000048B 8B0C25[70010000]          mov ecx,dword[x1]	; coordonnée source en x
   481 00000492 448B0425[78010000]        mov r8d,dword[y1]	; coordonnée source en y
   482 0000049A 448B0C25[74010000]        mov r9d,dword[x2]	; coordonnée destination en x
   483 000004A2 FF3425[7C010000]          push qword[y2]		; coordonnée destination en y
   484 000004A9 E8(00000000)              call XDrawLine
   485 000004AE 59                        pop rcx
   486                                    
   487 000004AF 59                        pop rcx
   488                                   
   489                                   endforfaces:
   490                                   
   491                                   
   492 000004B0 FEC1                     inc cl
   493 000004B2 80F906                   cmp cl, 6 ; on itère pour les 6 faces
   494 000004B5 0F820DFDFFFF             jb forfaces
   495                                  
   496                                  
   497                                  
   498                                  ; ############################
   499                                  ; # FIN DE LA ZONE DE DESSIN #
   500                                  ; ############################
   501 000004BB EB00                    jmp flush
   502                                  
   503                                  flush:
   504 000004BD 488B3C25[00000000]      mov rdi,qword[display_name]
   505 000004C5 E8(00000000)            call XFlush
   506 000004CA E90CFCFFFF              jmp boucle
   507 000004CF B822000000              mov rax,34
   508 000004D4 0F05                    syscall
   509                                  
   510                                  closeDisplay:
   511 000004D6 488B0425[00000000]          mov     rax,qword[display_name]
   512 000004DE 4889C7                      mov     rdi,rax
   513 000004E1 E8(00000000)                call    XCloseDisplay
   514 000004E6 4831FF                      xor	    rdi,rdi
   515 000004E9 E8(00000000)                call    exit
   516                                  	
